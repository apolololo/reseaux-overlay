
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APO Overlay Studio</title>
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/studio.css">
    <link rel="stylesheet" href="./styles/editor.css">
    <link rel="stylesheet" href="./styles/library.css">
</head>
<body>
    <div class="loading-screen">
        <div class="spinner"></div>
        <p>Chargement...</p>
    </div>
    
    <div id="app" style="display: none;">
        <nav class="studio-nav">
            <div class="nav-brand">
                <img src="./images/twitch.png" alt="Logo" class="nav-logo">
                <h1>APO Overlay Studio</h1>
            </div>
            <ul class="nav-items">
                <li><button class="nav-btn active" data-view="editor">√âditeur</button></li>
                <li><button class="nav-btn" data-view="library">Biblioth√®que</button></li>
                <li><button class="nav-btn" data-view="templates">Templates</button></li>
            </ul>
            <div class="nav-user">
                <span class="username">Utilisateur</span>
                <button class="logout-btn">D√©connexion</button>
            </div>
        </nav>
        
        <main class="studio-content">
            <!-- Vue √âditeur -->
            <section id="editor-view" class="view-section">
                <div class="section-header">
                    <h2>√âditeur d'overlay</h2>
                    <div class="input-group">
                        <input type="text" id="overlay-name" placeholder="Nom de l'overlay" value="Nouvel overlay">
                    </div>
                </div>
                
                <div class="editor-layout">
                    <div class="editor-sidebar">
                        <div class="sidebar-section">
                            <h3>√âl√©ments</h3>
                            <div class="elements-list">
                                <div class="element-item" data-type="text" draggable="true">
                                    <div class="element-icon">T</div>
                                    <span>Texte</span>
                                </div>
                                <div class="element-item" data-type="image" draggable="true">
                                    <div class="element-icon">üñºÔ∏è</div>
                                    <span>Image</span>
                                </div>
                                <div class="element-item" data-type="shape" draggable="true">
                                    <div class="element-icon">‚¨õ</div>
                                    <span>Forme</span>
                                </div>
                                <div class="element-item" data-type="timer" draggable="true">
                                    <div class="element-icon">‚è±Ô∏è</div>
                                    <span>Minuteur</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="sidebar-section">
                            <h3>Canvas</h3>
                            <div class="canvas-settings">
                                <div class="setting-field">
                                    <label for="canvas-preset">Dimensions :</label>
                                    <select id="canvas-preset">
                                        <option value="1920x1080">1920x1080 (16:9)</option>
                                        <option value="1280x720">1280x720 (16:9)</option>
                                        <option value="1080x1080">1080x1080 (1:1)</option>
                                        <option value="custom">Personnalis√©</option>
                                    </select>
                                </div>
                                <div class="custom-size" style="display: none;">
                                    <div class="setting-field">
                                        <label for="canvas-width">Largeur (px) :</label>
                                        <input type="number" id="canvas-width" value="1920" min="100" max="3840">
                                    </div>
                                    <div class="setting-field">
                                        <label for="canvas-height">Hauteur (px) :</label>
                                        <input type="number" id="canvas-height" value="1080" min="100" max="2160">
                                    </div>
                                </div>
                                <div class="setting-field">
                                    <label for="canvas-background">Couleur de fond :</label>
                                    <input type="color" id="canvas-background" value="#000000">
                                </div>
                            </div>
                        </div>
                        
                        <div class="sidebar-section">
                            <h3>Actions</h3>
                            <div class="action-buttons">
                                <button id="preview-overlay" class="action-btn">Pr√©visualiser</button>
                                <button id="save-overlay" class="action-btn primary">Sauvegarder</button>
                                <button id="copy-url" class="action-btn" disabled>Copier l'URL</button>
                                <button id="clear-canvas" class="action-btn danger">Effacer tout</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="editor-main">
                        <div class="canvas-container">
                            <div id="editor-canvas"></div>
                        </div>
                    </div>
                    
                    <div class="editor-properties">
                        <div class="properties-panel">
                            <h3>Propri√©t√©s</h3>
                            
                            <div class="no-selection-message">
                                <p>S√©lectionnez un √©l√©ment pour modifier ses propri√©t√©s</p>
                            </div>
                            
                            <div class="properties-group common-properties" style="display: none;">
                                <h4>Position et taille</h4>
                                <div class="property-field">
                                    <label for="position-x">Position X :</label>
                                    <input type="number" id="position-x" value="0">
                                </div>
                                <div class="property-field">
                                    <label for="position-y">Position Y :</label>
                                    <input type="number" id="position-y" value="0">
                                </div>
                                <div class="property-field">
                                    <label for="element-width">Largeur (px) :</label>
                                    <input type="number" id="element-width" value="100">
                                </div>
                                <div class="property-field">
                                    <label for="element-height">Hauteur (px) :</label>
                                    <input type="number" id="element-height" value="100">
                                </div>
                                <div class="property-field">
                                    <label for="element-rotation">Rotation (¬∞) :</label>
                                    <div class="slider-field">
                                        <input type="range" id="element-rotation" min="0" max="360" value="0">
                                        <span>0¬∞</span>
                                    </div>
                                </div>
                                <div class="property-buttons">
                                    <button id="bring-forward" class="property-btn">Avancer</button>
                                    <button id="send-backward" class="property-btn">Reculer</button>
                                    <button id="delete-element" class="property-btn danger">Supprimer</button>
                                </div>
                            </div>
                            
                            <div class="properties-group text-properties" style="display: none;">
                                <h4>Propri√©t√©s du texte</h4>
                                <div class="property-field">
                                    <label for="text-content">Contenu :</label>
                                    <textarea id="text-content" rows="3"></textarea>
                                </div>
                                <div class="property-field">
                                    <label for="font-family">Police :</label>
                                    <select id="font-family">
                                        <option value="Arial">Arial</option>
                                        <option value="Montserrat" selected>Montserrat</option>
                                        <option value="Roboto">Roboto</option>
                                        <option value="Open Sans">Open Sans</option>
                                        <option value="Comic Sans MS">Comic Sans MS</option>
                                        <option value="Impact">Impact</option>
                                        <option value="Courier New">Courier New</option>
                                    </select>
                                </div>
                                <div class="property-field">
                                    <label for="font-size">Taille (px) :</label>
                                    <div class="slider-field">
                                        <input type="range" id="font-size" min="8" max="72" value="24">
                                        <span>24px</span>
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="text-color">Couleur du texte :</label>
                                    <div class="color-field">
                                        <input type="color" id="text-color" value="#ffffff">
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="text-bg-color">Couleur de fond :</label>
                                    <div class="color-field">
                                        <input type="color" id="text-bg-color" value="transparent">
                                    </div>
                                </div>
                                <div class="text-style-buttons">
                                    <button id="text-bold" class="style-btn">Gras</button>
                                    <button id="text-italic" class="style-btn">Italique</button>
                                </div>
                            </div>
                            
                            <div class="properties-group image-properties" style="display: none;">
                                <h4>Propri√©t√©s de l'image</h4>
                                <div class="property-field">
                                    <button id="change-image" class="property-btn">Changer d'image</button>
                                </div>
                                <div class="property-field">
                                    <label for="image-opacity">Opacit√© :</label>
                                    <div class="slider-field">
                                        <input type="range" id="image-opacity" min="0" max="100" value="100">
                                        <span>100%</span>
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="image-radius">Arrondi (px) :</label>
                                    <div class="slider-field">
                                        <input type="range" id="image-radius" min="0" max="50" value="0">
                                        <span>0px</span>
                                    </div>
                                </div>
                            </div>

                            <div class="properties-group shape-properties" style="display: none;">
                                <h4>Propri√©t√©s de la forme</h4>
                                <div class="property-field">
                                    <label for="shape-type">Type de forme :</label>
                                    <select id="shape-type">
                                        <option value="rectangle">Rectangle</option>
                                        <option value="rounded">Rectangle arrondi</option>
                                        <option value="circle">Cercle</option>
                                    </select>
                                </div>
                                <div class="property-field">
                                    <label for="shape-bg-color">Couleur de remplissage :</label>
                                    <div class="color-field">
                                        <input type="color" id="shape-bg-color" value="#ffffff">
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="shape-border-color">Couleur de bordure :</label>
                                    <div class="color-field">
                                        <input type="color" id="shape-border-color" value="#000000">
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="shape-border-width">√âpaisseur de bordure (px) :</label>
                                    <div class="slider-field">
                                        <input type="range" id="shape-border-width" min="0" max="20" value="2">
                                        <span>2px</span>
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="shape-radius">Arrondi (px) :</label>
                                    <div class="slider-field">
                                        <input type="range" id="shape-radius" min="0" max="50" value="0">
                                        <span>0px</span>
                                    </div>
                                </div>
                            </div>

                            <div class="properties-group timer-properties" style="display: none;">
                                <h4>Propri√©t√©s du minuteur</h4>
                                <div class="property-field">
                                    <label for="timer-format">Format :</label>
                                    <select id="timer-format">
                                        <option value="hh:mm:ss">Heures:Minutes:Secondes</option>
                                        <option value="mm:ss">Minutes:Secondes</option>
                                        <option value="ss">Secondes uniquement</option>
                                    </select>
                                </div>
                                <div class="property-field">
                                    <label for="timer-duration">Dur√©e (secondes) :</label>
                                    <input type="number" id="timer-duration" value="600" min="1">
                                </div>
                                <div class="property-field">
                                    <label for="timer-color">Couleur du texte :</label>
                                    <div class="color-field">
                                        <input type="color" id="timer-color" value="#ffffff">
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="timer-bg-color">Couleur de fond :</label>
                                    <div class="color-field">
                                        <input type="color" id="timer-bg-color" value="#000000">
                                    </div>
                                </div>
                                <div class="property-field">
                                    <label for="timer-font-size">Taille (px) :</label>
                                    <div class="slider-field">
                                        <input type="range" id="timer-font-size" min="8" max="72" value="24">
                                        <span>24px</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal de pr√©visualisation -->
                <div id="preview-modal" class="modal">
                    <div class="modal-content preview-modal-content">
                        <div class="modal-header">
                            <h3>Pr√©visualisation de l'overlay</h3>
                            <button id="close-preview" class="close-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <iframe id="preview-frame" frameborder="0"></iframe>
                        </div>
                    </div>
                </div>
                
                <!-- Modal de sauvegarde -->
                <div id="save-modal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Sauvegarder l'overlay</h3>
                            <button id="close-save" class="close-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="save-overlay-name">Nom de l'overlay :</label>
                                <input type="text" id="save-overlay-name" placeholder="Mon overlay">
                            </div>
                            <div class="form-group">
                                <label for="overlay-description">Description :</label>
                                <textarea id="overlay-description" placeholder="Description de l'overlay (optionnel)"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="overlay-category">Cat√©gorie :</label>
                                <select id="overlay-category">
                                    <option value="starting">Starting Soon</option>
                                    <option value="brb">Be Right Back</option>
                                    <option value="ending">Stream Ending</option>
                                    <option value="social">R√©seaux sociaux</option>
                                    <option value="gaming">Gaming</option>
                                    <option value="other">Autre</option>
                                </select>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" id="overlay-public">
                                <label for="overlay-public">Rendre public</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="cancel-save" class="btn">Annuler</button>
                            <button id="confirm-save" class="btn primary">Sauvegarder</button>
                        </div>
                    </div>
                </div>
                
                <!-- Modal d'URL -->
                <div id="url-modal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>URL de l'overlay pour OBS</h3>
                            <button id="close-url-modal" class="close-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="obs-url">URL source de navigateur pour OBS :</label>
                                <input type="text" id="obs-url" readonly>
                            </div>
                            <p class="helper-text">Ajoutez cette URL comme source "Navigateur" dans OBS Studio.</p>
                        </div>
                        <div class="modal-footer">
                            <button id="copy-obs-url" class="btn primary">Copier l'URL</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Vue Biblioth√®que -->
            <section id="library-view" class="view-section hidden" style="display: none;">
                <div class="section-header">
                    <h2>Biblioth√®que d'overlays</h2>
                    <div class="search-filter-bar">
                        <div class="search-bar">
                            <input type="text" id="search-overlays" placeholder="Rechercher un overlay...">
                        </div>
                        <div class="filter-dropdown">
                            <select id="sort-overlays">
                                <option value="recent">Les plus r√©cents</option>
                                <option value="name">Par nom</option>
                                <option value="type">Par type</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="overlays-grid">
                    <!-- Les overlays seront ajout√©s dynamiquement ici -->
                </div>
            </section>
            
            <!-- Vue Templates -->
            <section id="templates-view" class="view-section hidden" style="display: none;">
                <div class="section-header">
                    <h2>Templates</h2>
                </div>
                <div class="templates-container">
                    <p>Les templates ne sont pas encore disponibles dans cette version.</p>
                </div>
            </section>
        </main>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="./js/studio/auth-check.js"></script>
    <script src="./js/studio/main.js"></script>
    <script src="./js/studio/editor.js"></script>
    <script src="./js/studio/library.js"></script>
    <script src="./js/studio/templates.js"></script>
</body>
</html>
