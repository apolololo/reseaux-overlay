<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>APO Overlay Studio</title>
  <link rel="stylesheet" href="./styles/studio.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
  <!-- √âcran de chargement -->
  <div class="loading-screen">
    <div class="loading-logo">APO</div>
    <div class="loading-spinner"></div>
    <div class="loading-text">Chargement du Studio...</div>
  </div>

  <!-- Application principale -->
  <div id="app" style="display: none;">
    <!-- En-t√™te avec navigation -->
    <header class="studio-header">
      <div class="logo">APO STUDIO</div>
      <nav class="main-nav">
        <button class="nav-btn active" data-view="editor">√âditeur</button>
        <button class="nav-btn" data-view="library">Ma biblioth√®que</button>
        <button class="nav-btn" data-view="templates">Mod√®les</button>
      </nav>
      <div class="user-controls">
        <span class="username"></span>
        <button class="logout-btn">D√©connexion</button>
      </div>
    </header>

    <!-- Contenu principal -->
    <main class="studio-content">
      <!-- Vue √âditeur -->
      <section id="editor-view" class="view-section">
        <div class="editor-layout">
          <!-- Panneau lat√©ral des outils -->
          <div class="tools-panel">
            <h2>√âl√©ments</h2>
            <div class="elements-list">
              <div class="element-item" draggable="true" data-type="text">
                <div class="element-icon">T</div>
                <div class="element-label">Texte</div>
              </div>
              <div class="element-item" draggable="true" data-type="image">
                <div class="element-icon">üñºÔ∏è</div>
                <div class="element-label">Image</div>
              </div>
              <div class="element-item" draggable="true" data-type="shape">
                <div class="element-icon">‚¨ú</div>
                <div class="element-label">Forme</div>
              </div>
              <div class="element-item" draggable="true" data-type="social">
                <div class="element-icon">üì±</div>
                <div class="element-label">R√©seaux sociaux</div>
              </div>
              <div class="element-item" draggable="true" data-type="timer">
                <div class="element-icon">‚è±Ô∏è</div>
                <div class="element-label">Minuteur</div>
              </div>
              <div class="element-item" draggable="true" data-type="creator-code">
                <div class="element-icon">üè∑Ô∏è</div>
                <div class="element-label">Code cr√©ateur</div>
              </div>
            </div>

            <h2>Propri√©t√©s</h2>
            <div class="properties-panel">
              <div class="no-selection-message">S√©lectionnez un √©l√©ment pour modifier ses propri√©t√©s</div>
              
              <!-- Propri√©t√©s de texte (visible quand un texte est s√©lectionn√©) -->
              <div class="text-properties properties-group" style="display: none;">
                <div class="property-row">
                  <label>Texte</label>
                  <textarea id="text-content" rows="2"></textarea>
                </div>
                <div class="property-row">
                  <label>Police</label>
                  <select id="font-family">
                    <option value="Montserrat">Montserrat</option>
                    <option value="Arial">Arial</option>
                    <option value="Roboto">Roboto</option>
                    <option value="Poppins">Poppins</option>
                  </select>
                </div>
                <div class="property-row">
                  <label>Taille</label>
                  <input type="range" id="font-size" min="8" max="72" value="16">
                  <span class="range-value">16px</span>
                </div>
                <div class="property-row">
                  <label>Couleur</label>
                  <input type="color" id="text-color" value="#ffffff">
                </div>
                <div class="property-row buttons-row">
                  <button id="text-bold" class="format-btn">B</button>
                  <button id="text-italic" class="format-btn">I</button>
                  <button id="text-align-left" class="format-btn">‚´∑</button>
                  <button id="text-align-center" class="format-btn">‚â°</button>
                  <button id="text-align-right" class="format-btn">‚´∏</button>
                </div>
              </div>
              
              <!-- Propri√©t√©s d'image (visible quand une image est s√©lectionn√©e) -->
              <div class="image-properties properties-group" style="display: none;">
                <div class="property-row">
                  <label>Image</label>
                  <button id="change-image" class="action-btn">Changer l'image</button>
                </div>
                <div class="property-row">
                  <label>Opacit√©</label>
                  <input type="range" id="image-opacity" min="0" max="100" value="100">
                  <span class="range-value">100%</span>
                </div>
                <div class="property-row">
                  <label>Arrondi</label>
                  <input type="range" id="image-radius" min="0" max="50" value="0">
                  <span class="range-value">0px</span>
                </div>
                <div class="property-row">
                  <label>Bordure</label>
                  <input type="range" id="image-border" min="0" max="20" value="0">
                  <span class="range-value">0px</span>
                </div>
                <div class="property-row">
                  <label>Couleur bordure</label>
                  <input type="color" id="border-color" value="#ffffff">
                </div>
              </div>
              
              <!-- Propri√©t√©s communes √† tous les √©l√©ments -->
              <div class="common-properties properties-group" style="display: none;">
                <div class="property-row">
                  <label>Position X</label>
                  <input type="number" id="position-x" value="0">
                </div>
                <div class="property-row">
                  <label>Position Y</label>
                  <input type="number" id="position-y" value="0">
                </div>
                <div class="property-row">
                  <label>Largeur</label>
                  <input type="number" id="element-width" value="100">
                </div>
                <div class="property-row">
                  <label>Hauteur</label>
                  <input type="number" id="element-height" value="100">
                </div>
                <div class="property-row">
                  <label>Rotation</label>
                  <input type="range" id="element-rotation" min="0" max="360" value="0">
                  <span class="range-value">0¬∞</span>
                </div>
                <div class="property-row buttons-row">
                  <button id="bring-forward" class="action-btn">Avancer</button>
                  <button id="send-backward" class="action-btn">Reculer</button>
                  <button id="delete-element" class="action-btn delete-btn">Supprimer</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Zone de pr√©visualisation -->
          <div class="preview-area">
            <div class="canvas-controls">
              <div class="canvas-size">
                <select id="canvas-preset">
                  <option value="custom">Personnalis√©</option>
                  <option value="1920x1080" selected>1920 √ó 1080 (16:9)</option>
                  <option value="1280x720">1280 √ó 720 (16:9)</option>
                  <option value="800x600">800 √ó 600 (4:3)</option>
                  <option value="500x500">500 √ó 500 (Carr√©)</option>
                </select>
                <div class="custom-size" style="display: none;">
                  <input type="number" id="canvas-width" value="1920" min="100" max="3840">
                  <span>√ó</span>
                  <input type="number" id="canvas-height" value="1080" min="100" max="2160">
                </div>
              </div>
              <div class="canvas-actions">
                <button id="undo-btn" class="action-btn" disabled>Annuler</button>
                <button id="redo-btn" class="action-btn" disabled>R√©tablir</button>
                <button id="clear-canvas" class="action-btn">Effacer tout</button>
              </div>
            </div>
            
            <div class="canvas-container">
              <div class="canvas-background">
                <div id="editor-canvas" class="editor-canvas">
                  <!-- Les √©l√©ments seront ajout√©s ici dynamiquement -->
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Barre d'actions en bas -->
        <div class="action-bar">
          <div class="overlay-name">
            <input type="text" id="overlay-name" placeholder="Nom de l'overlay" value="Mon overlay personnalis√©">
          </div>
          <div class="action-buttons">
            <button id="preview-overlay" class="action-btn">Pr√©visualiser</button>
            <button id="save-overlay" class="primary-btn">Enregistrer</button>
            <button id="copy-url" class="action-btn" disabled>Copier l'URL pour OBS</button>
          </div>
        </div>
      </section>

      <!-- Vue Biblioth√®que -->
      <section id="library-view" class="view-section hidden">
        <div class="library-header">
          <h1>Ma biblioth√®que d'overlays</h1>
          <div class="library-actions">
            <input type="text" placeholder="Rechercher..." id="search-overlays">
            <select id="sort-overlays">
              <option value="recent">Plus r√©cents</option>
              <option value="name">Nom (A-Z)</option>
              <option value="type">Type</option>
            </select>
          </div>
        </div>
        
        <div class="overlays-grid">
          <!-- Les overlays sauvegard√©s seront affich√©s ici -->
          <div class="empty-library-message">
            <div class="empty-icon">üìÅ</div>
            <h2>Votre biblioth√®que est vide</h2>
            <p>Cr√©ez votre premier overlay personnalis√© en utilisant l'√©diteur</p>
            <button class="primary-btn switch-to-editor">Cr√©er un overlay</button>
          </div>
        </div>
      </section>

      <!-- Vue Mod√®les -->
      <section id="templates-view" class="view-section hidden">
        <div class="templates-header">
          <h1>Mod√®les d'overlays</h1>
          <div class="templates-filter">
            <button class="filter-btn active" data-filter="all">Tous</button>
            <button class="filter-btn" data-filter="starting">Starting Soon</button>
            <button class="filter-btn" data-filter="brb">Be Right Back</button>
            <button class="filter-btn" data-filter="ending">Stream Ending</button>
            <button class="filter-btn" data-filter="social">R√©seaux sociaux</button>
            <button class="filter-btn" data-filter="gaming">Gaming</button>
          </div>
        </div>
        
        <div class="templates-grid">
          <!-- Template 1 -->
          <div class="template-card" data-type="starting">
            <div class="template-preview">
              <img src="./images/templates/starting-1.jpg" alt="Starting Soon Template">
            </div>
            <div class="template-info">
              <h3>Starting Soon - Modern</h3>
              <p>Overlay de d√©marrage avec minuteur et animations</p>
              <button class="use-template-btn">Utiliser ce mod√®le</button>
            </div>
          </div>
          
          <!-- Template 2 -->
          <div class="template-card" data-type="brb">
            <div class="template-preview">
              <img src="./images/templates/brb-1.jpg" alt="BRB Template">
            </div>
            <div class="template-info">
              <h3>Be Right Back - Minimal</h3>
              <p>Overlay de pause avec animation discr√®te</p>
              <button class="use-template-btn">Utiliser ce mod√®le</button>
            </div>
          </div>
          
          <!-- Template 3 -->
          <div class="template-card" data-type="ending">
            <div class="template-preview">
              <img src="./images/templates/ending-1.jpg" alt="Ending Template">
            </div>
            <div class="template-info">
              <h3>Stream Ending - Social</h3>
              <p>√âcran de fin avec r√©seaux sociaux et remerciements</p>
              <button class="use-template-btn">Utiliser ce mod√®le</button>
            </div>
          </div>
          
          <!-- Template 4 -->
          <div class="template-card" data-type="social">
            <div class="template-preview">
              <img src="./images/templates/social-1.jpg" alt="Social Template">
            </div>
            <div class="template-info">
              <h3>Social Media Bar</h3>
              <p>Barre de r√©seaux sociaux anim√©e pour vos streams</p>
              <button class="use-template-btn">Utiliser ce mod√®le</button>
            </div>
          </div>
          
          <!-- Template 5 -->
          <div class="template-card" data-type="gaming">
            <div class="template-preview">
              <img src="./images/templates/gaming-1.jpg" alt="Gaming Template">
            </div>
            <div class="template-info">
              <h3>Gaming HUD</h3>
              <p>Interface de jeu avec notifications et statistiques</p>
              <button class="use-template-btn">Utiliser ce mod√®le</button>
            </div>
          </div>
          
          <!-- Template 6 -->
          <div class="template-card" data-type="gaming">
            <div class="template-preview">
              <img src="./images/templates/gaming-2.jpg" alt="Gaming Template">
            </div>
            <div class="template-info">
              <h3>Fortnite Stats</h3>
              <p>Affichage des statistiques Fortnite en temps r√©el</p>
              <button class="use-template-btn">Utiliser ce mod√®le</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modales -->
  <div class="modal" id="preview-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Pr√©visualisation de l'overlay</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="preview-frame-container">
          <iframe id="preview-frame" frameborder="0"></iframe>
        </div>
      </div>
      <div class="modal-footer">
        <button class="action-btn" id="close-preview">Fermer</button>
      </div>
    </div>
  </div>

  <div class="modal" id="save-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Enregistrer l'overlay</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="save-form">
          <div class="form-group">
            <label for="save-overlay-name">Nom de l'overlay</label>
            <input type="text" id="save-overlay-name" value="Mon overlay personnalis√©">
          </div>
          <div class="form-group">
            <label for="overlay-description">Description (optionnelle)</label>
            <textarea id="overlay-description" rows="3" placeholder="D√©crivez votre overlay..."></textarea>
          </div>
          <div class="form-group">
            <label for="overlay-category">Cat√©gorie</label>
            <select id="overlay-category">
              <option value="starting">Starting Soon</option>
              <option value="brb">Be Right Back</option>
              <option value="ending">Stream Ending</option>
              <option value="social">R√©seaux sociaux</option>
              <option value="gaming">Gaming</option>
              <option value="other">Autre</option>
            </select>
          </div>
          <div class="form-group checkbox-group">
            <input type="checkbox" id="overlay-public" checked>
            <label for="overlay-public">Rendre public dans la galerie communautaire</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="action-btn" id="cancel-save">Annuler</button>
        <button class="primary-btn" id="confirm-save">Enregistrer</button>
      </div>
    </div>
  </div>

  <div class="modal" id="url-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>URL pour OBS</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p>Copiez cette URL et ajoutez-la comme source "Navigateur" dans OBS :</p>
        <div class="url-container">
          <input type="text" id="obs-url" readonly>
          <button id="copy-obs-url">Copier</button>
        </div>
        <div class="url-info">
          <p><strong>Note :</strong> Cette URL est unique √† votre compte. Les modifications que vous apporterez √† cet overlay seront automatiquement mises √† jour dans OBS sans avoir √† changer l'URL.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="action-btn" id="close-url-modal">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="./js/studio/auth-check.js"></script>
  <script src="./js/studio/editor.js"></script>
  <script src="./js/studio/library.js"></script>
  <script src="./js/studio/templates.js"></script>
  <script src="./js/studio/main.js"></script>
</body>
</html>